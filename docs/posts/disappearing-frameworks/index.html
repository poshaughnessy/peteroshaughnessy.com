<!doctype html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
      <title>Disappearing Frameworks - Peter O'Shaughnessy</title>
    <meta name="description" content="Web developer especially interested in web APIs and the future of the web">
    <link rel="stylesheet" href="/styles/styles.css"/>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto+Condensed:400,700,400italic,700italic">
    <link rel="icon" href="/images/favicon.png" type="image/png">
    <link rel="alternate" type="application/rss+xml" title="RSS feed" href="https://peteroshaughnessy.com/rss.xml" />
    <!-- Twitter Card data -->
    <meta name="twitter:card" content="summary">
    <meta name="twitter:site" content="@poshaughnessy">
    <meta name="twitter:creator" content="@poshaughnessy">
      <meta name="twitter:title" content="Disappearing Frameworks">
      <meta name="twitter:description" content="How new web platform features and compile-time frameworks are establishing the next era of web development.">
      <meta name="twitter:image" content="https://peteroshaughnessy.com/images/posts/2018-06-21-disappearing-frameworks/thumb.jpg">
  </head>
  <body>
    <header>
      <div>
        <div class="avatar-container">
          <a href="/"><img class="avatar" src="/images/peter-cartoon-circle.png" alt="Peter's cartoon avatar"/></a>
        </div>
        <div class="title-and-tagline-container">
          <h1><a href="/">Peter O'Shaughnessy</a></h1>
          <h2>Web technologies and browser-based experiments</h2>
        </div>
      </div>
      <nav>
        <ul>
          <li><a href="/">Blog</a></li>
          <li><a href="/projects/">Projects</a></li>
          <li><a href="/talks/">Talks</a></li>
          <li><a href="/about/">About</a></li>
        </ul>
      </nav>
    </header>
<div class="contents">
  <article class="page page-post">
    <h1>Disappearing Frameworks</h1>
    <p class="date"><time>21st Jun 2018</time></p>
    <h3 id="how-new-web-platform-features-and-compile-time-frameworks-are-establishing-the-next-era-of-web-development"><em>How new web platform features and compile-time frameworks are establishing the next era of web development</em></h3>
<p><img src="/images/posts/2018-06-21-disappearing-frameworks/cover.jpg" alt="Credit: Stefan Bucher"></p>
<p class="credit">Photo credit: [Stefan Bucher](https://www.flickr.com/photos/bucher/684595491)</p>

<p>Frameworks like Angular, React and Ember are par-for-the-course for complex web development these days. Over this decade (Angular was first released in 2010) they have grown to become defacto standards for many of us, helping countless organisations to structure their code, manage state and build complex UIs, based on reusable components.</p>
<p>However, as you might know, JavaScript is <a href="https://infrequently.org/2017/10/can-you-afford-it-real-world-web-performance-budgets/">our most expensive web asset</a>‚Ää‚Äî‚Ääthe most likely to <a href="https://developers.google.com/web/fundamentals/performance/optimizing-content-efficiency/javascript-startup-optimization/">negatively impact our pages‚Äô interactivity</a>. And we‚Äôre shipping <a href="https://httparchive.org/reports/state-of-javascript">more of it to our users</a> than ever. The average web page <a href="https://speedcurve.com/blog/web-performance-page-bloat/">is now over 3MB</a>, bigger than the size of the <a href="https://www.wired.com/2016/04/average-webpage-now-size-original-doom/">original Doom game</a>! We may have fast networks and cheap data plans but our users <a href="https://twitter.com/poshaughnessy/status/987400541838848000">may</a> <a href="https://www.smashingmagazine.com/2017/03/world-wide-web-not-wealthy-western-web-part-1/">well</a> <a href="http://whatdoesmysitecost/">not</a>.</p>
<p>As <a href="https://medium.com/@slightlylate">Alex Russell</a> <a href="https://infrequently.org/2017/10/can-you-afford-it-real-world-web-performance-budgets/">has calculated</a>, going beyond just 130KB for all our assets can mean failing to load within 5 seconds on a baseline phone and network. Yet some of our favourite frameworks can <a href="https://gist.github.com/Restuta/cda69e50a853aa64912d">take up more than that</a> <em>just by themselves</em>.</p>
<p>Can we have the benefits that we‚Äôve become used to from these frameworks, while avoiding the bloat? A great <em>Developer Experience</em> and a great <em>User Experience</em>? I believe so. And I believe that we‚Äôre entering a new era of web development that will be defined by this... An era where our <em>frameworks disappear</em>.</p>
<h3 id="svelte">Svelte</h3>
<p>An example of this trend is <a href="https://svelte.technology/">Svelte</a>, ‚Äúthe magical disappearing UI framework‚Äù.</p>
<p><img src="/images/posts/2018-06-21-disappearing-frameworks/svelte.png" alt="Svelte"></p>
<p class="credit">[svelte.technology/](https://svelte.technology/) (not to be confused with sveltejs.com :))</p>

<p>Svelte is a <em>compile-time framework</em>, not a client-side framework. We‚Äôre used to sending big JavaScript bundles over to our users, and expecting their browsers to parse and execute the scripts. Svelte doesn‚Äôt work like that. Instead, it compiles your application into small, standalone, vanilla JavaScript modules. In other words, by the time it gets to your users, it will have disappeared!</p>
<p>An example of an app that was built using Svelte is <a href="https://pinafore.social/">Pinafore</a>, a Progressive Web App client for the <a href="https://joinmastodon.org/">Mastodon decentralised social network</a>, built by <a href="https://medium.com/@nolan_lawson">Nolan Lawson</a> from Microsoft. Pinafore gets a <a href="https://www.webpagetest.org/result/180618_CB_d0e10506615eb99ebd4e2a97166070fe/">very fast result from Web Page Test</a> and a score of 98 for performance from <a href="https://developers.google.com/web/tools/lighthouse/">Lighthouse</a>.</p>
<p><img src="/images/posts/2018-06-21-disappearing-frameworks/pinafore.png" alt="Pinafore"></p>
<p class="credit">A [toot](https://toot.cafe/@flakoot/100226502630578333) about pinafore.social, viewed at pinafore.social :)</p>

<p>Svelte itself is pretty minimal, but it has a related project called <a href="https://sapper.svelte.technology/">Sapper</a> which builds a whole developer experience on top of it. Inspired by <a href="https://github.com/zeit/next.js/">Next.js</a>, it includes server-side rendering, code-splitting, scoped styling, declarative routing and live reloading with hot-module replacement. Furthermore, the <a href="https://github.com/sveltejs/sapper-template">Sapper starter template</a> gives you a <a href="https://developer.mozilla.org/en-US/Apps/Progressive">PWA</a> by default, with a web app manifest and a service worker with automatic resource caching.</p>
<p>I asked Nolan how he found using Svelte and Sapper. He told me that he found Svelte ‚Äúa dream to work with‚Äù. Sapper ‚Äúis a little less mature‚Äù and he had <a href="https://github.com/sveltejs/svelte/issues/1411">some</a> <a href="https://github.com/sveltejs/sapper/issues/242">issues</a> with it, but he‚Äôs happy with it too. I‚Äôve also started using them for a new project and so far the combination of all those developer features along with the super performance really does <a href="https://svelte.technology/blog/sapper-towards-the-ideal-web-app-framework">feel ideal</a>!</p>
<h3 id="stencil">Stencil</h3>
<p>Svelte has also <a href="https://news.ycombinator.com/item?id=15081241">inspired</a> an alternative project from Ionic: <a href="https://stenciljs.com/">Stencil</a>.</p>
<p><img src="/images/posts/2018-06-21-disappearing-frameworks/stencil.png" alt="Stencil"></p>
<p class="credit">More magic!‚Ää‚Äî‚Ää[stencil.js](https://stenciljs.com/)</p>

<p>Again, the goal is to adopt ‚Äúthe best concepts of the most popular frameworks‚Äù, but to achieve better performance:</p>
<blockquote>
‚ÄúWith‚Ä¶ traditional frameworks and bundling techniques, the team was struggling to meet latency and code size demands for Progressive Web Apps that ran equally well on fast and slow networks, across a diversity of platforms and devices.‚Äù‚Ää‚Äî‚Ää[stenciljs.com](https://stenciljs.com/)
</blockquote>

<p>To understand what Stencil consists of, I found this <a href="https://component.kitchen/blog/posts/a-look-at-stenciljs">introduction from Rob Bearman useful</a>. There‚Äôs also a <a href="https://youtu.be/MqMYaT1GlWY">video intro here</a> by <a href="https://twitter.com/maxedapps">Maximilian</a>. The output from Stencil is a standard Web Component (more on Web Components below), not specific to Stencil. This means you could use them in conjunction with another framework if you wanted (but this post is about frameworks disappearing, not multiplying! üòâ).</p>
<p><em>NB. It‚Äôs not promoted much in the docs, but it‚Äôs also possible to configure Svelte to compile directly to Web Components too (<a href="https://github.com/Rich-Harris/ivy-code-size">here‚Äôs an example</a>‚Ää‚Äî‚Ääwith the ‚ÄòcustomElement‚Äô flag <a href="https://github.com/Rich-Harris/ivy-code-size/blob/master/rollup.config.js#L14">set here</a>‚Ää‚Äî‚Ääand <a href="https://gist.github.com/Rich-Harris/ff78dafa2e75bae672e9b3e89259819a#file-custom-element-js-L177-L209">here‚Äôs how the resulting output looks</a>). However, <a href="https://medium.com/@Rich_Harris">Rich Harris</a>, the developer of Svelte (and <a href="https://rollupjs.org/guide/en">Rollup</a> and other amazing things!) told me that he doesn‚Äôt think the benefits of enabling this are that great right now.</em></p>
<p>Stencil is also similar to Google‚Äôs more well-known <a href="https://www.polymer-project.org/">Polymer</a>, but it‚Äôs intended to fully disappear from the output! I haven‚Äôt used either enough to comment too much, but Polymer could be worth another look too. The recent <a href="https://www.polymer-project.org/3.0/docs/about_30">version 3</a> moved from HTML Imports to ES Modules (more on this below) and from Bower to npm. There‚Äôs also a <a href="https://github.com/Polymer/pwa-starter-kit">PWA Starter Kit</a> that <a href="https://medium.com/@slightlylate">Alex Russell</a> recommends as the best place to begin building performant web apps. It gives you the <a href="https://developers.google.com/web/fundamentals/performance/prpl-pattern/">PRPL pattern</a> (Push, Render, Pre-cache, Lazy-load) out of the box.</p>
<h3 id="next-gen-angular">Next-gen Angular</h3>
<p>Thanks to Rich Harris for informing me that Angular is following this trend too! <a href="https://angular.io/guide/elements">Angular Elements</a>‚Ää‚Äî‚Äänew in Angular 6‚Ää‚Äî‚Ääallows you to export Angular components as self-bootstrapping Web Components. Currently, it still requires ‚Äúa minimal, self-contained version of the Angular framework [to] be injected‚Äù, but they are ‚Äúworking on custom elements that can be used by web apps built on other frameworks‚Äù.</p>
<p>Plus Angular‚Äôs <a href="https://github.com/angular/angular/issues/21706">next-gen Ivy renderer</a> is designed to drastically reduce the output code size. (Although worth a look: in the spirit of friendly competition, Rich has created <a href="https://github.com/Rich-Harris/ivy-code-size">a comparison of the output</a> from Svelte, compiling to Web Components, versus Ivy!).</p>
<p><img src="/images/posts/2018-06-21-disappearing-frameworks/ivy.jpg" alt="Credit: Auntie P"></p>
<p class="credit">(Kind of angular) ivy. Credit: [Auntie P](https://www.flickr.com/photos/auntiep/28551118/)</p>

<p>It‚Äôs great that popular frameworks are embracing this approach and making their output leaner too. Hopefully, as more and more web apps transition over, it will have a big impact on web performance.</p>
<p>Furthermore, increasingly we <em>may not need a framework at all</em>. Frameworks can of course make development easier and will continue to provide useful additions, but the web platform itself is providing more functionality than ever‚Ä¶</p>
<h2 id="the-web-platform-as-a-framework">The web platform as a framework</h2>
<p>In her article <a href="https://samsunginter.net/rube-goldberg-article/">‚ÄúA Rube Goldberg Machine‚Äù</a> and <a href="https://youtu.be/DCRN1cG7sOA">subsequent talk</a>, my colleague <a href="https://medium.com/@Lady_Ada_King">Ada Rose Cannon</a> shared how new CSS and JavaScript features can be ‚Äúthought of as frameworks built into the web platform‚Äù. For example, CSS Custom Properties (a.k.a. CSS Variables) might mean you don‚Äôt need a CSS precompiler like <a href="http://sass-lang.com/">Sass</a> anymore. And CSS Grid might now save you from downloading Bootstrap.</p>
<blockquote>
‚ÄúYou don‚Äôt need a framework to use CSS Grid. CSS Grid is a framework.‚Äù
- Rachel Andrew
</blockquote>

<h3 id="web-components">Web Components</h3>
<p><a href="https://developer.mozilla.org/en-US/docs/Web/Web_Components">Web Components</a> are especially powerful and the key to much of this trend. They consist of four main technologies: Custom Elements, Shadow DOM, HTML templates and HTML imports. These features <a href="https://caniuse.com/#search=web%20components">aren‚Äôt available everywhere yet</a>, but as Ada says, they have pretty good support and <a href="https://www.webcomponents.org/polyfills/">there‚Äôs a polyfill</a> which gives them even better support, so you can use them today!</p>
<p>Ada and <a href="https://medium.com/@rumyra">Ruth John</a> recently developed a music visualisation web app using Web Components and shared <a href="https://medium.com/samsung-internet-dev/lessons-learned-making-our-app-with-web-components-bf55379cfcda">their lessons learned here</a>.</p>
<p>You can feel even safer adopting newer features like Web Components if you use Server-Side Rendering (SSR) and implement your client-side with <a href="https://www.smashingmagazine.com/2009/04/progressive-enhancement-what-it-is-and-how-to-use-it/">Progressive Enhancement</a>.</p>
<blockquote>
"My personal preference is to build a great SSR experience and then enhance it to a Single Page App."
- Ada Rose Cannon
</blockquote>

<h3 id="isomorphic-es-modules">Isomorphic ES modules</h3>
<p>You can also adopt <a href="https://flaviocopes.com/es-modules/">ES modules</a> now! Again, browser support is pretty good, and you can support older browsers with <a href="https://jakearchibald.com/2017/es-modules-in-browsers/#nomodule-for-backwards-compatibility">the ‚Äònomodule‚Äô fallback</a>.</p>
<p>In fact, if you are OK with using the SSR + Progressive Enhancement approach, then you can even use ES modules without needing a bundling tool to <a href="https://www.sitepoint.com/transpiling-es6-modules-to-amd-commonjs-using-babel-gulp/">rewrite them</a> for other browsers‚Ää‚Äî‚Ääsince older browsers can still function without JavaScript. And by using <a href="https://www.npmjs.com/package/esm">a module loader called ESM</a>, we can also <a href="https://medium.com/web-on-the-edge/tomorrows-es-modules-today-c53d29ac448c">use these ES modules directly in Node too</a>.</p>
<p>This is great, because we get to reuse our scripts across the front-end and back-end (i.e. ‚Äúisomorphic rendering‚Äù) without jumping through hoops. We can structure our front-end code nicely, without having to bundle our scripts together, dump lots of script tags on the page, or introduce client-side module loaders.</p>
<p>This is exactly what Ada demonstrated in her <a href="https://youtu.be/fe6-HQLBJh8">first Twitch tech talk</a> this month. There is also a <a href="https://medium.com/samsung-internet-dev/isomorphic-es-modules-151f0d9a919b">blog post explainer here</a>.</p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/fe6-HQLBJh8" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe>

<p>I hope this post has shared how we‚Äôre starting to embark on a new era of web development. An era that is less reliant on traditional UI frameworks, CSS libraries and bundlers. An era where we ship less bytes and load our web apps quicker. An era of <em>disappearing frameworks</em>.</p>
<p>--</p>
<p><em>Thank you to Nolan Lawson, Rich Harris and Ada Rose Cannon and for their help and inspiration for this article.</em></p>

      <p class="tags">
          <span>javascript</span>
          <span> performance</span>
      </p>
  </article>
</div>
    <footer>
      <p><a rel="me" href="https://toot.cafe/@peter">Mastodon</a> | <a rel="me" href="https://twitter.com/@poshaughnessy">Twitter</a> | <a href="https://github.com/poshaughnessy/">Github</a> | <a href="http://uk.linkedin.com/in/poshaughnessy/">LinkedIn</a> | <a href="https://github.com/poshaughnessy/peteroshaughnessy.com">Source</a> | <a href="rss.xml">RSS</a></p>
      <p>¬© 2019 Peter O'Shaughnessy</p>
    </footer>
  </body>
</html>
